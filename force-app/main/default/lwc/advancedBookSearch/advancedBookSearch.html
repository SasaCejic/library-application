<template>
    <lightning-card>
        <div class="slds-grid slds-gutters">
            <div class="slds-col">
                <lightning-input
                    value={name} 
                    onchange={handleNameInput} 
                    class="slds-p-horizontal_x-large slds-p-vertical_medium" 
                    label="Name">
                </lightning-input>
                <lightning-input
                    value={ISBN} 
                    onchange={handleISBNInput} 
                    class="slds-p-horizontal_x-large slds-p-vertical_medium" 
                    label="ISBN">
                </lightning-input>
                <c-combobox-autocomplete 
                    label="Author"
                    options={authorOptions}
                    placeholder="Select an Author"
                    classes="slds-p-horizontal_x-large slds-p-vertical_medium"
                    value={searchAuthorValue}
                    onselectoption={handleAuthorSelectOption}
                    onsearch={handleAuthorSearch}>
                </c-combobox-autocomplete>
                <lightning-input
                    value={publishDate} 
                    onchange={handlePublishDateInput} 
                    class="slds-p-horizontal_x-large slds-p-vertical_medium" 
                    label="Publish Date">
                </lightning-input>
            </div>
            <div class="slds-col">
                <c-combobox-autocomplete 
                    label="Publisher"
                    options={publisherOptions}
                    placeholder="Select a Publisher"
                    classes="slds-p-horizontal_x-large slds-p-vertical_medium"
                    value={searchPublisherValue}
                    onselectoption={handlePublisherSelectOption}
                    onsearch={handlePublisherSearch}>
                </c-combobox-autocomplete>
                <c-combobox-autocomplete 
                    label="Bookstore"
                    options={bookstoreOptions}
                    placeholder="Select a Bookstore"
                    classes="slds-p-horizontal_x-large slds-p-vertical_medium"
                    value={searchBookstoreValue}
                    onselectoption={handleBookstoreSelectOption}
                    onsearch={handleBookstoreSearch}>
                </c-combobox-autocomplete>
                <lightning-input
                    value={reviewScore} 
                    onchange={handlereviewScoreInput} 
                    class="slds-p-horizontal_x-large slds-p-vertical_medium" 
                    label="Minimum Review Score"
                    type="number">
                </lightning-input>
                <lightning-input
                    value={term} 
                    onchange={handleTermInput} 
                    class="slds-p-horizontal_x-large slds-p-vertical_medium" 
                    label="Term">
                </lightning-input>
            </div>
        </div>
        <div class="slds-card slds-p-horizontal_x-large slds-p-vertical_medium">
            <lightning-slider
                classes="slds-p-horizontal_x-large slds-p-vertical_medium"
                label="Price Maximum"
                value={price}
                onchange={handlePriceChange}
                max={priceRangeMaximum}
                min="1">
            </lightning-slider>
        </div>
        <lightning-dual-listbox 
            class="slds-p-horizontal_x-large slds-p-vertical_medium"
            label="Select Categories"
            source-label="Available"
            selected-label="Selected"
            field-level-help="Select Categories"
            options={categoriesOptions}
            onchange={handleCategoriesChange}>
        </lightning-dual-listbox>
        <lightning-dual-listbox 
            class="slds-p-horizontal_x-large slds-p-vertical_medium"
            label="Select Laguages to Include"
            source-label="Available"
            selected-label="Selected"
            field-level-help="Select Laguages"
            options={languagesOptions}
            onchange={handleLanguagesChange}>
        </lightning-dual-listbox>

        <div class="slds-card slds-p-horizontal_xx-large slds-p-vertical_medium slds-clearfix">
            <lightning-button onclick={handleBookSearch} label="Search" class="slds-float_right"></lightning-button>
        </div>

        

        <div style="height: 300px" class="slds-var-m-around_medium">
            <template lwc:if={books}>
                <lightning-datatable
                    key-field="Id"
                    data={books}
                    columns={columns}
                    hide-checkbox-column
                    sorted-by={sortBy}
                    sorted-direction={sortDirection}
                    onsort={handleSorting}
                    onloadmore={handleLoadMore}
                    enable-infinite-loading={moreToLoad}
                    show-row-number-column
                    load-more-offset="5"
                >
                </lightning-datatable>
            </template>
            <template lwc:elseif={error}>
                <div class="slds-text-color_error">
                    {error.body.message}
                </div>
            </template>
        </div>
    </lightning-card>
</template>